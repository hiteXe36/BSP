<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>BS TI A3 Virtual Memory: src/mmanage.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BS TI A3 Virtual Memory
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mmanage.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Memory Manager module of TI BSP A3 virtual memory.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/ipc.h&gt;</code><br />
<code>#include &lt;sys/shm.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mmanage_8h_source.html">mmanage.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pagefile_8h_source.html">pagefile.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logger_8h_source.html">logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="syncdataexchange_8h_source.html">syncdataexchange.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vmem_8h_source.html">vmem.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structage.html">age</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5ef21e9a22b6a35124039d789bcec431"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a5ef21e9a22b6a35124039d789bcec431">fetchPage</a> (int page, int frame)</td></tr>
<tr class="memdesc:a5ef21e9a22b6a35124039d789bcec431"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function fetchs a page from disk into memory. The page table will be updated.  <a href="#a5ef21e9a22b6a35124039d789bcec431">More...</a><br /></td></tr>
<tr class="separator:a5ef21e9a22b6a35124039d789bcec431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfe5d2a0a164ccf7d8a314e6cc58e926"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#abfe5d2a0a164ccf7d8a314e6cc58e926">removePage</a> (int page)</td></tr>
<tr class="memdesc:abfe5d2a0a164ccf7d8a314e6cc58e926"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function removes a page from main memory. If the page was modified, it will be written back to disk. The page table will be updated.  <a href="#abfe5d2a0a164ccf7d8a314e6cc58e926">More...</a><br /></td></tr>
<tr class="separator:abfe5d2a0a164ccf7d8a314e6cc58e926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8569d222b54a8c3cbadad9d1a3f441c5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a8569d222b54a8c3cbadad9d1a3f441c5">vmem_init</a> (void)</td></tr>
<tr class="memdesc:a8569d222b54a8c3cbadad9d1a3f441c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the virtual memory. In particular it creates the shared memory. The application just attachs to the shared memory.  <a href="#a8569d222b54a8c3cbadad9d1a3f441c5">More...</a><br /></td></tr>
<tr class="separator:a8569d222b54a8c3cbadad9d1a3f441c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988cdc290c5d32fa7b7592cad4c867a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a988cdc290c5d32fa7b7592cad4c867a9">find_unused_frame</a> ()</td></tr>
<tr class="memdesc:a988cdc290c5d32fa7b7592cad4c867a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function finds an unused frame. At the beginning all frames are unused. A frame will never change it's state form used to unused.  <a href="#a988cdc290c5d32fa7b7592cad4c867a9">More...</a><br /></td></tr>
<tr class="separator:a988cdc290c5d32fa7b7592cad4c867a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf55f926862c17c28d2e1fe98e6e5342"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#adf55f926862c17c28d2e1fe98e6e5342">allocate_page</a> (const int req_page, const int <a class="el" href="vmaccess_8c.html#a55e1a1590b61458d392ea39837e4e26b">g_count</a>)</td></tr>
<tr class="memdesc:adf55f926862c17c28d2e1fe98e6e5342"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will be called when a page fault has occurred. It allocates a new page into memory. If all frames are in use the corresponding page replacement algorithm will be called. Please take into account that allocate_page must update the page table and log the page fault as well.  <a href="#adf55f926862c17c28d2e1fe98e6e5342">More...</a><br /></td></tr>
<tr class="separator:adf55f926862c17c28d2e1fe98e6e5342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049d48681cda954047abd29e67580757"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a049d48681cda954047abd29e67580757">sighandler</a> (int signo)</td></tr>
<tr class="memdesc:a049d48681cda954047abd29e67580757"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is the signal handler attached to system call sigaction for signal SIGUSR2 and SIGINT. These signals have the same signal handler. Based on the parameter signo the corresponding action will be started.  <a href="#a049d48681cda954047abd29e67580757">More...</a><br /></td></tr>
<tr class="separator:a049d48681cda954047abd29e67580757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464366e5e4f5e2f535f1fa8e66bcbc23"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a464366e5e4f5e2f535f1fa8e66bcbc23">dump_pt</a> (void)</td></tr>
<tr class="memdesc:a464366e5e4f5e2f535f1fa8e66bcbc23"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function dumps the page table to stderr.  <a href="#a464366e5e4f5e2f535f1fa8e66bcbc23">More...</a><br /></td></tr>
<tr class="separator:a464366e5e4f5e2f535f1fa8e66bcbc23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab229b845636e5b73dfdf392752ec84b5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#ab229b845636e5b73dfdf392752ec84b5">find_remove_aging</a> (int page, int *removedPage, int *frame)</td></tr>
<tr class="memdesc:ab229b845636e5b73dfdf392752ec84b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements page replacement algorithm aging.  <a href="#ab229b845636e5b73dfdf392752ec84b5">More...</a><br /></td></tr>
<tr class="separator:ab229b845636e5b73dfdf392752ec84b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fb366d7e6c4977ab4d7414af2beb6d9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a9fb366d7e6c4977ab4d7414af2beb6d9">update_age_reset_ref</a> (void)</td></tr>
<tr class="memdesc:a9fb366d7e6c4977ab4d7414af2beb6d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function does aging for aging page replacement algorithm. It will be called periodic based on g_count. This function must be used only when aging algorithm is activ. Otherwise update_age_reset_ref may interfere with other page replacement alogrithms that base on PTF_REF bit.  <a href="#a9fb366d7e6c4977ab4d7414af2beb6d9">More...</a><br /></td></tr>
<tr class="separator:a9fb366d7e6c4977ab4d7414af2beb6d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae552c1e46a014a81222cf1c19beca801"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#ae552c1e46a014a81222cf1c19beca801">find_remove_fifo</a> (int page, int *removedPage, int *frame)</td></tr>
<tr class="memdesc:ae552c1e46a014a81222cf1c19beca801"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements page replacement algorithm fifo.  <a href="#ae552c1e46a014a81222cf1c19beca801">More...</a><br /></td></tr>
<tr class="separator:ae552c1e46a014a81222cf1c19beca801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44b58ce60baf27e0ae001dbcf3678bb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#ae44b58ce60baf27e0ae001dbcf3678bb">find_remove_clock</a> (int page, int *removedPage, int *frame)</td></tr>
<tr class="memdesc:ae44b58ce60baf27e0ae001dbcf3678bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements page replacement algorithm clock.  <a href="#ae44b58ce60baf27e0ae001dbcf3678bb">More...</a><br /></td></tr>
<tr class="separator:ae44b58ce60baf27e0ae001dbcf3678bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb94fbd457627182ceee7e505f432541"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#aeb94fbd457627182ceee7e505f432541">cleanup</a> (void)</td></tr>
<tr class="memdesc:aeb94fbd457627182ceee7e505f432541"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function cleans up when mmange runs out.  <a href="#aeb94fbd457627182ceee7e505f432541">More...</a><br /></td></tr>
<tr class="separator:aeb94fbd457627182ceee7e505f432541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb5bf6ba7950e9ec630d59f6425645da"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#acb5bf6ba7950e9ec630d59f6425645da">scan_params</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:acb5bf6ba7950e9ec630d59f6425645da"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function scans all parameters of the porgram. The corresponding global variables page_rep_algo will be set.  <a href="#acb5bf6ba7950e9ec630d59f6425645da">More...</a><br /></td></tr>
<tr class="separator:acb5bf6ba7950e9ec630d59f6425645da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff767c56ce321099f562b56a6611e89"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a2ff767c56ce321099f562b56a6611e89">print_usage_info_and_exit</a> (char *err_str, char *programName)</td></tr>
<tr class="memdesc:a2ff767c56ce321099f562b56a6611e89"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function prints an error message and the usage information of this program.  <a href="#a2ff767c56ce321099f562b56a6611e89">More...</a><br /></td></tr>
<tr class="separator:a2ff767c56ce321099f562b56a6611e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad68a965ea4ac35267ee896539223341c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#ad68a965ea4ac35267ee896539223341c">pf_count</a> = 0</td></tr>
<tr class="memdesc:ad68a965ea4ac35267ee896539223341c"><td class="mdescLeft">&#160;</td><td class="mdescRight">page fault counter  <a href="#ad68a965ea4ac35267ee896539223341c">More...</a><br /></td></tr>
<tr class="separator:ad68a965ea4ac35267ee896539223341c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e18300528e54d436a8bce8f01238424"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a0e18300528e54d436a8bce8f01238424">shm_id</a> = -1</td></tr>
<tr class="memdesc:a0e18300528e54d436a8bce8f01238424"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared memory id. Will be used to destroy shared memory when mmanage terminates  <a href="#a0e18300528e54d436a8bce8f01238424">More...</a><br /></td></tr>
<tr class="separator:a0e18300528e54d436a8bce8f01238424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a96da3b256eb9df2b7e7fa5427ed228"><td class="memItemLeft" align="right" valign="top">static void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a8a96da3b256eb9df2b7e7fa5427ed228">pageRepAlgo</a> )(int, int *, int *) = NULL</td></tr>
<tr class="memdesc:a8a96da3b256eb9df2b7e7fa5427ed228"><td class="mdescLeft">&#160;</td><td class="mdescRight">selected page replacement algorithm according to parameters of mmanage  <a href="#a8a96da3b256eb9df2b7e7fa5427ed228">More...</a><br /></td></tr>
<tr class="separator:a8a96da3b256eb9df2b7e7fa5427ed228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b306d86a341310666b251b43e528d3b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structage.html">age</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a9b306d86a341310666b251b43e528d3b">age</a> [<a class="el" href="vmem_8h.html#a827efcef77d8decda1cada6f5f273e1a">VMEM_NFRAMES</a>]</td></tr>
<tr class="separator:a9b306d86a341310666b251b43e528d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cc1b31c7520254bafc3c7b4702a662b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structvmem__struct.html">vmem_struct</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmanage_8c.html#a8cc1b31c7520254bafc3c7b4702a662b">vmem</a> = NULL</td></tr>
<tr class="memdesc:a8cc1b31c7520254bafc3c7b4702a662b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to shared memory.  <a href="#a8cc1b31c7520254bafc3c7b4702a662b">More...</a><br /></td></tr>
<tr class="separator:a8cc1b31c7520254bafc3c7b4702a662b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Memory Manager module of TI BSP A3 virtual memory. </p>
<dl class="section author"><dt>Author</dt><dd>Prof. Dr. Wolfgang Fohl, HAW Hamburg </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2014</dd></dl>
<p>This is the memory manager process that works together with the vmaccess process to manage virtual memory management.</p>
<p>mvappl sends synchronious command to memory manager via module syncdataexchange.</p>
<p>This process starts shared memory, so it has to be started prior to the vmaccess process.</p>
<dl class="section author"><dt>Author</dt><dd>Prof. Dr. Wolfgang Fohl, HAW Hamburg </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2014</dd></dl>
<p>This is the memory manager process that works together with the vmaccess process to manage virtual memory management.</p>
<p>The memory manager process will be invoked via a SIGUSR1 signal. It maintains the page table and provides the data pages in shared memory.</p>
<p>This process starts shared memory, so it has to be started prior to the vmaccess process. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="adf55f926862c17c28d2e1fe98e6e5342"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void allocate_page </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>req_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>g_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will be called when a page fault has occurred. It allocates a new page into memory. If all frames are in use the corresponding page replacement algorithm will be called. Please take into account that allocate_page must update the page table and log the page fault as well. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req_page</td><td>The page that must be allocated due to the page fault.</td></tr>
    <tr><td class="paramname">g_count</td><td>Current g_count value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="aeb94fbd457627182ceee7e505f432541"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function cleans up when mmange runs out. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a464366e5e4f5e2f535f1fa8e66bcbc23"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dump_pt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function dumps the page table to stderr. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a5ef21e9a22b6a35124039d789bcec431"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fetchPage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function fetchs a page from disk into memory. The page table will be updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>Number of the page that should be removed </td></tr>
    <tr><td class="paramname">frame</td><td>Number of frame that should contain the page.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="ab229b845636e5b73dfdf392752ec84b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void find_remove_aging </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>removedPage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function implements page replacement algorithm aging. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>Number of page that should be loaded into memory.</td></tr>
    <tr><td class="paramname">removedPage</td><td>Number of page that has been selected for replacement. If an unused frame has selected, this parameter will not be modified.</td></tr>
    <tr><td class="paramname">frame</td><td>Number of frame that will be used to store the page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae44b58ce60baf27e0ae001dbcf3678bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void find_remove_clock </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>removedPage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function implements page replacement algorithm clock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>Number of page that should be loaded into memory.</td></tr>
    <tr><td class="paramname">removedPage</td><td>Number of page that has been selected for replacement. If an unused frame has selected, this parameter will not be modified.</td></tr>
    <tr><td class="paramname">frame</td><td>Number of frame that will be used to store the page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae552c1e46a014a81222cf1c19beca801"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void find_remove_fifo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>removedPage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function implements page replacement algorithm fifo. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>Number of page that should be loaded into memory.</td></tr>
    <tr><td class="paramname">removedPage</td><td>Number of page that has been selected for replacement. If an unused frame has selected, this parameter will not be modified.</td></tr>
    <tr><td class="paramname">frame</td><td>Number of frame that will be used to store the page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a988cdc290c5d32fa7b7592cad4c867a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int find_unused_frame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function finds an unused frame. At the beginning all frames are unused. A frame will never change it's state form used to unused. </p>
<p>Since the log files to be compared with contain the allocated frames, unused frames must always be assigned the same way. Here, the frames are assigned according to ascending frame number.</p>
<dl class="section return"><dt>Returns</dt><dd>idx of the unused frame with the smallest idx. If all frames are in use, VOID_IDX will be returned. </dd></dl>

</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ff767c56ce321099f562b56a6611e89"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void print_usage_info_and_exit </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>err_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>programName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function prints an error message and the usage information of this program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">err_str</td><td>pointer to the error string that should be printed. </td></tr>
    <tr><td class="paramname">programName</td><td>pointer to the name of the the program</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="abfe5d2a0a164ccf7d8a314e6cc58e926"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void removePage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function removes a page from main memory. If the page was modified, it will be written back to disk. The page table will be updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>Number of the page that should be removed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="acb5bf6ba7950e9ec630d59f6425645da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void scan_params </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function scans all parameters of the porgram. The corresponding global variables page_rep_algo will be set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>number of parameter</td></tr>
    <tr><td class="paramname">argv</td><td>parameter list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a049d48681cda954047abd29e67580757"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sighandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is the signal handler attached to system call sigaction for signal SIGUSR2 and SIGINT. These signals have the same signal handler. Based on the parameter signo the corresponding action will be started. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signo</td><td>Current signal that has be be handled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a9fb366d7e6c4977ab4d7414af2beb6d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_age_reset_ref </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function does aging for aging page replacement algorithm. It will be called periodic based on g_count. This function must be used only when aging algorithm is activ. Otherwise update_age_reset_ref may interfere with other page replacement alogrithms that base on PTF_REF bit. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a8569d222b54a8c3cbadad9d1a3f441c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void vmem_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function initializes the virtual memory. In particular it creates the shared memory. The application just attachs to the shared memory. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a9b306d86a341310666b251b43e528d3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structage.html">age</a> <a class="el" href="structage.html">age</a>[<a class="el" href="vmem_8h.html#a827efcef77d8decda1cada6f5f273e1a">VMEM_NFRAMES</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8a96da3b256eb9df2b7e7fa5427ed228"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void(* pageRepAlgo) (int, int *, int *) = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>selected page replacement algorithm according to parameters of mmanage </p>

</div>
</div>
<a class="anchor" id="ad68a965ea4ac35267ee896539223341c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int pf_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>page fault counter </p>

</div>
</div>
<a class="anchor" id="a0e18300528e54d436a8bce8f01238424"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int shm_id = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>shared memory id. Will be used to destroy shared memory when mmanage terminates </p>

</div>
</div>
<a class="anchor" id="a8cc1b31c7520254bafc3c7b4702a662b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structvmem__struct.html">vmem_struct</a>* vmem = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to shared memory. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
